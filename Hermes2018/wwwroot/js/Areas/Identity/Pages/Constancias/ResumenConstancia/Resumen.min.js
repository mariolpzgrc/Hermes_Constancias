function getData(){var n=JSON.parse(localStorage.getItem("queryParams"));localStorage.getItem("queryParams")===null?window.history.back():(objUserInfo.numPersonal=n.numeroPersonal,objUserInfo.tipoPersonal=n.tipoPersonal,objGetInfoConstancia.Id=n.tipoContancia,ObtenerConstancia(objGetInfoConstancia.Id))}function ControlToggle(){$("#control-toggle").click(function(){$("#contenido-info").toggle({duration:"fast",complete:function(){$("#contenido-info:visible").length===0?$("#control-toggle i").removeClass("fas fa-angle-down").addClass("fas fa-angle-right"):$("#control-toggle i").removeClass("fas fa-angle-right").addClass("fas fa-angle-down")}})})}function ControlToggleConstancia(){$("#control-toggle-constancia").click(function(){$("#contenido-info-constancia").toggle({duration:"fast",complete:function(){$("#contenido-info-constancia:visible").length===0?$("#control-toggle-constancia i").removeClass("fas fa-angle-down").addClass("fas fa-angle-right"):$("#control-toggle-constancia i").removeClass("fas fa-angle-right").addClass("fas fa-angle-down")}})})}function ObtenerConstancia(n){switch(parseInt(n)){case 1:objUserInfo.tipoPersonal===Funcionario||objUserInfo.tipoPersonal===Confianza||objUserInfo.tipoPersonal===Academico?(objGetInfoConstancia.urlCons="api/constancias/ObtieneServMed",ObtenerInfoConstancia()):(window.history.back(),alert(objGetInfoConstancia.mensajeAdvertencia));break;case 2:objUserInfo.tipoPersonal===Funcionario||objUserInfo.tipoPersonal===Confianza||objUserInfo.tipoPersonal===Academico?(objGetInfoConstancia.urlCons="api/constancias/ObtieneServMedDep",ObtenerInfoConstancia()):(window.history.back(),alert(objGetInfoConstancia.mensajeAdvertencia));break;case 3:objGetInfoConstancia.urlCons="api/constancias/ObtieneTrab_Perc";ObtenerInfoConstancia();break;case 4:objGetInfoConstancia.urlCons="";ObtenerInfoConstancia();break;case 5:objUserInfo.tipoPersonal!=Eventual?(objGetInfoConstancia.urlCons="api/constancias/ObtieneIpe",ObtenerInfoConstancia()):(window.history.back(),alert(objGetInfoConstancia.mensajeAdvertencia));break;case 6:objUserInfo.tipoPersonal!=Eventual?(objGetInfoConstancia.urlCons="api/constancias/ObtieneMag",ObtenerInfoConstancia()):(window.history.back(),alert(objGetInfoConstancia.mensajeAdvertencia));break;case 7:objUserInfo.tipoPersonal!=Eventual?(objGetInfoConstancia.urlCons="api/constancias/ObtieneOfiBajIPE",ObtenerInfoConstancia()):(window.history.back(),alert(objGetInfoConstancia.mensajeAdvertencia));break;case 8:objUserInfo.tipoPersonal!=Eventual?(objGetInfoConstancia.urlCons="api/constancias/ObtieneOfiBajMAG",ObtenerInfoConstancia()):(window.history.back(),alert(objGetInfoConstancia.mensajeAdvertencia));break;case 9:objGetInfoConstancia.urlCons="api/constancias/ObtieneVisa";ObtenerInfoConstancia();break;case 10:objUserInfo.tipoPersonal===Funcionario||objUserInfo.tipoPersonal===Confianza||objUserInfo.tipoPersonal===Academico?(objGetInfoConstancia.urlCons="api/constancias/ObtieneVisaDep",ObtenerInfoConstancia()):(window.history.back(),alert(objGetInfoConstancia.mensajeAdvertencia));break;case 11:objUserInfo.tipoPersonal===Academico?(objGetInfoConstancia.urlCons="api/constancias/ObtienePRODep",ObtenerInfoConstancia()):(window.history.back(),alert(objGetInfoConstancia.mensajeAdvertencia));break;case 12:objUserInfo.tipoPersonal===Academico?(objGetInfoConstancia.urlCons="",ObtenerInfoConstancia()):(window.history.back(),alert(objGetInfoConstancia.mensajeAdvertencia));break;case 13:objUserInfo.tipoPersonal!==Eventual?(objGetInfoConstancia.urlCons="",ObtenerInfoConstancia()):(window.history.back(),alert(objGetInfoConstancia.mensajeAdvertencia));break;case 14:objUserInfo.tipoPersonal!==Eventual?(objGetInfoConstancia.urlCons="",ObtenerInfoConstancia()):(window.history.back(),alert(objGetInfoConstancia.mensajeAdvertencia))}}function ObtenerInfoConstancia(){let t,i;var n;objGetInfoConstancia.urln=objWebRoot.route+objGetInfoConstancia.urlCons;$.ajax({url:objGetInfoConstancia.urln,type:"POST",data:JSON.stringify({NumPersonal:objUserInfo.numPersonal,TipoPersonal:objUserInfo.tipoPersonal}),datatype:"application/json",contentType:"application/json",beforeSend:function(n){n.setRequestHeader("Authorization","Bearer "+objWebRoot.token)},success:function(n){n?(objGetInfoConstancia.info=Object.keys({}),objGetInfoConstancia.info=n[0]):alert(objGetInfoConstancia.mensajeError)},error:function(){alert(objGetInfoConstancia.mensajeError)},complete:function(){objGetInfoConstancia.info?($("#nombrePersonal").text(objGetInfoConstancia.info.sNombre),$("#numeroPersonal").text(objGetInfoConstancia.info.sNumPer),$("#fechaIngreso").text(new Date(objGetInfoConstancia.info.dtFIngreso).toLocaleDateString("es-ES",options).toLocaleUpperCase()),objSegConstancia.CveDep=objGetInfoConstancia.info.sNumDep,$("#dependencia").text(objGetInfoConstancia.info.sDescDep),objSegConstancia.NombreDep=objGetInfoConstancia.info.sDescDep,$("#region").text(objGetInfoConstancia.info.sDesRegion),objSegConstancia.idRegion=objGetInfoConstancia.info.sRegion,objSegConstancia.Region=objGetInfoConstancia.info.sDesRegion,$("#tipoPersonal").text(objGetInfoConstancia.info.sDesTPE),$("#tipoContratacion").text(objGetInfoConstancia.info.sDesCont),$("#categoriasueldo").text(objGetInfoConstancia.info.sDescCat),$("#puesto").text(objGetInfoConstancia.info.sDesPuesto),n=objGetInfoConstancia.info.sSueldo!=null?objGetInfoConstancia.info.sSueldo:objGetInfoConstancia.info.sSuelPrest!=null?objGetInfoConstancia.info.sSuelPrest:"0.00",console.log(n),t=parseFloat(n).toFixed(2),i=numeroALetras(t,monedaMXN),$("#sueldo").text("$ "+n+" - "+i+" 00/100 M.N."),$("#periodo").text(objGetInfoConstancia.info.sNPeri),$("#horas").text(objGetInfoConstancia.info.sHrs)):alert("No se pudo carggar la informaciÃ³n.")}})}function GuardarSolicitudConstancia(){objSegConstancia.urln=objWebRoot.route+"api/constancias/AddSolicitudConstancia";var n=new Date;$.ajax({url:objSegConstancia.urln,type:"POST",data:JSON.stringify({Id:0,ConstanciaId:objGetInfoConstancia.Id,NoPersonal:objUserInfo.numPersonal,Folio:"TEST2022-22",Mensaje:"Constancia en proceso",UsuarioId:objUser.username,FechaSolicitud:n,EstadoId:1,CveDep:objSegConstancia.CveDep,NombreDep:objSegConstancia.NombreDep,TipoPersonal:objUserInfo.tipoPersonal,CampusId:objSegConstancia.idRegion,NombreCampus:objSegConstancia.Region}),contentType:"application/json",beforeSend:function(n){n.setRequestHeader("Authorization","Bearer "+objWebRoot.token)},success:function(n){console.log(n);console.log(n.CodeResponse);n.CodeResponse===0?(window.alert("Solicitud completa."),window.location.href=objWebRoot.route+"Constancias/Solicitud/SolicitudConstancia"):alert("Hubo un error al solcitar la constancia.")},error:function(){alert("Hubo un error al solcitar la constancia.")}})}var objWebRoot={route:"",token:""},objGetInfoConstancia={Id:0,info:Object.keys({}),urln:"",urlCons:"",mensajeError:"No se puede llenar el formulario.",mensajeAdvertencia:"Su tipo de personal no puede solicitar esta constancia."},objSegConstancia={Id:0,info:Object.keys({}),urln:"",CveDep:0,NombreDep:"",idRegion:0,Region:""},objUser={username:"",usersession:""},objUserInfo={numPersonal:0,tipoPersonal:0},monedaMXN={plural:"PESOS",singular:"PESO",centPlural:"CENTAVOS",centSingular:"CENTAVO"},options={year:"numeric",month:"long",day:"numeric"},dataSeguimiento={NoPersonal:0,ConstanciaId:0,EstadoId:0,FechaSolicitud:""},numeroALetras;const Funcionario=1,ATM=2,Confianza=3,Academico=4,Eventual=5;$(document).ready(function(){objUser.username=$("#user").text();objUser.usersession=$("#FolioSession").val();getData();ObtenerConstancia();ControlToggle();ControlToggleConstancia()});numeroALetras=function(){function i(n){switch(n){case 1:return"UN";case 2:return"DOS";case 3:return"TRES";case 4:return"CUATRO";case 5:return"CINCO";case 6:return"SEIS";case 7:return"SIETE";case 8:return"OCHO";case 9:return"NUEVE"}return""}function n(n){let u=Math.floor(n/10),r=n-u*10;switch(u){case 1:switch(r){case 0:return"DIEZ";case 1:return"ONCE";case 2:return"DOCE";case 3:return"TRECE";case 4:return"CATORCE";case 5:return"QUINCE";default:return"DIECI"+i(r)}case 2:switch(r){case 0:return"VEINTE";default:return"VEINTI"+i(r)}case 3:return t("TREINTA",r);case 4:return t("CUARENTA",r);case 5:return t("CINCUENTA",r);case 6:return t("SESENTA",r);case 7:return t("SETENTA",r);case 8:return t("OCHENTA",r);case 9:return t("NOVENTA",r);case 0:return i(r)}}function t(n,t){return t>0?n+" Y "+i(t):n}function u(t){let r=Math.floor(t/100),i=t-r*100;switch(r){case 1:return i>0?"CIENTO "+n(i):"CIEN";case 2:return"DOSCIENTOS "+n(i);case 3:return"TRESCIENTOS "+n(i);case 4:return"CUATROCIENTOS "+n(i);case 5:return"QUINIENTOS "+n(i);case 6:return"SEISCIENTOS "+n(i);case 7:return"SETECIENTOS "+n(i);case 8:return"OCHOCIENTOS "+n(i);case 9:return"NOVECIENTOS "+n(i)}return n(i)}function f(n,t,i,r){let f=Math.floor(n/t),o=n-f*t,e="";return f>0&&(e=f>1?u(f)+" "+r:i),o>0&&(e+=""),e}function e(n){let t=1e3,e=Math.floor(n/t),o=n-e*t,i=f(n,t,"UN MIL","MIL"),r=u(o);return i==""?r:i+" "+r}function r(n){let t=1e6,u=Math.floor(n/t),o=n-u*t,i=f(n,t,"UN MILLON DE","MILLONES DE"),r=e(o);return i==""?r:i+" "+r}return function(n,t){t=t||{};let i={numero:n,enteros:Math.floor(n),centavos:Math.round(n*100)-Math.floor(n)*100,letrasCentavos:"",letrasMonedaPlural:t.plural||"PESOS",letrasMonedaSingular:t.singular||"PESO ",letrasMonedaCentavoPlural:t.centPlural||"CHIQUI PESOS CHILENOS",letrasMonedaCentavoSingular:t.centSingular||"CHIQUI PESO CHILENO"};return(i.centavos>0&&(i.letrasCentavos="CON "+function(){return i.centavos==1?r(i.centavos)+" "+i.letrasMonedaCentavoSingular:r(i.centavos)+" "+i.letrasMonedaCentavoPlural}()),i.enteros==0)?"CERO "+i.letrasMonedaPlural+" "+i.letrasCentavos:i.enteros==1?r(i.enteros)+" "+i.letrasMonedaSingular+" "+i.letrasCentavos:r(i.enteros)+" "+i.letrasMonedaPlural+" "+i.letrasCentavos}}();