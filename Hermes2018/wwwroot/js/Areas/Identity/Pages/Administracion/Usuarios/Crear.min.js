function ControlRol(){$("select#Crear_Rol").change(function(){objs.arrRolUsuario.includes($(this).val())?$("#Crear_EsTitular").is(":checked")||$("#contiene-titular").removeClass("d-none"):($("#Crear_RegionId, #Crear_AreaId").val(""),$("#Crear_EsTitular").is(":checked")||($("#contiene-titular").removeClass("d-none"),$("#contiene-titular").addClass("d-none")))})}function ControlAutocompletado(){$("input#Crear_NombreUsuario").flexdatalist({cache:!1,multiple:!0,minLength:3,searchContain:!1,searchByWord:!0,maxShownResults:10,selectionRequired:!0,focusFirstResult:!0,searchIn:["HER_Usuario_NombreCompleto","HER_Usuario_Username"],searchDelay:400,noResultsText:'No se han encontrado resultados para "{keyword}"',visibleProperties:["HER_Usuario_NombreCompleto"],textProperty:"{HER_Usuario_Username}",valueProperty:"HER_Usuario_Username",removeOnBackspace:!0,valuesSeparator:",",limitOfValues:1,url:objWebRoot.route+"api/v1/users/listactive",requestHeaders:{Authorization:"Bearer "+objWebRoot.token}});$("input#Crear_NombreUsuario").on("select:flexdatalist",function(n,t){$("#Crear_Nombre").val(t.HER_Usuario_NombreCompleto);$("#Crear_Correo").val(t.HER_Usuario_Correo)});$("input#Crear_NombreUsuario").on("after:flexdatalist.remove",function(){$("#control-busqueda ul > li.input-container").show();$("#Crear_Nombre").val("");$("#Crear_Correo").val("")})}function ControlAutocompletadoTitular(){$("input#Crear_Titular").flexdatalist({cache:!1,multiple:!0,minLength:3,searchContain:!1,searchByWord:!0,maxShownResults:20,selectionRequired:!0,focusFirstResult:!0,searchIn:["HER_Usuario_NombreCompleto","HER_Usuario_Username"],searchDelay:400,noResultsText:'No se han encontrado resultados para "{keyword}"',visibleProperties:["HER_Usuario_NombreCompleto"],textProperty:"{HER_Usuario_Username}",valueProperty:"HER_Usuario_Username",removeOnBackspace:!0,valuesSeparator:",",limitOfValues:1,url:objWebRoot.route+"api/v1/users/listactive",requestHeaders:{Authorization:"Bearer "+objWebRoot.token}});$("input#Crear_Titular").on("select:flexdatalist",function(n,t){$("#Crear_Nombre").val(t.HER_Usuario_NombreCompleto)});$("input#Crear_Titular").on("after:flexdatalist.remove",function(){$("#contiene-titular ul > li.input-container").show();$("#Crear_Nombre").val("")})}function ControlEsTitular(){$("#Crear_EsTitular").change(function(){$(this).is(":checked")?($("#contiene-titular").removeClass("d-none"),$("#contiene-titular").addClass("d-none")):$("#contiene-titular").removeClass("d-none")})}function ObtenerAreas(){objp.urln=objWebRoot.route+"api/v1/areas/padresConHijas/"+objr.id;objp.metodo="GET";$.ajax({url:objp.urln,type:objp.metodo,contentType:"application/json; charset=utf-8",beforeSend:function(n){n.setRequestHeader("Authorization","Bearer "+objWebRoot.token)},success:function(n){objAreas.info=Object.keys({});objAreas.info=n;$("#Crear_AreaId").empty();$("#Crear_AreaId").append($("<option><\/option>").val("").html("[Seleccione un 치rea]"));$.each(objAreas.info,function(n,t){$("#Crear_AreaId").append($("<option><\/option>").val(t.HER_AreaId).html(t.HER_Nombre))})},error:function(){console.log("No se puede recuperar la informacion");$("#Crear_AreaId").empty();$("#Crear_AreaId").append($("<option><\/option>").val("").html("[Seleccione una regi칩n]"))}})}function ControlArea(){$("#Crear_AreaId").change(function(){$("#Crear_AreaId").val()!==""?(objArea.id=$("#Crear_AreaId").val(),objArea.actual=objAreas.info.find(n=>n.HER_AreaId==objArea.id),$("#Crear_Direccion").val(objArea.actual.HER_Direccion),$("#Crear_Telefono").val(objArea.actual.HER_Telefono)):($("#Crear_Direccion").val(""),$("#Crear_Telefono").val(""))})}var objp={urln:"",metodo:"",datos:{}},objr={id:""},objs={arrRolAdmin:["Administrador General","Administrador Xalapa","Administrador Veracruz","Administrador Orizaba-C칩rdoba","Administrador Poza Rica-Tuxpan","Administrador Coatzacoalcos-Minatitl치n"],arrRolUsuario:["Titular","Usuario"],arrRolDelegado:["Delegado","Delegado Revisor"]},objrol={valor:""},objcheck={valor:!1},objAutocompletado={urln:"",usuario:""},objInfoUsuario={userName:"",fullName:"",email:""},objAutocompletadoTitular={urln:"",usuario:""},objInfoUsuarioTitular={userName:"",fullName:"",email:""},objWebRoot={route:"",token:""},objUser={username:""},objAreas={info:Object.keys({}),indexSeleccionado:0,objSeleccionado:Object.keys({})},objArea={id:0,actual:Object.keys({})};$(function(){return objWebRoot.route=$("#routeWebRoot").val(),objWebRoot.token=$("#TokenWebApi").val(),objUser.username=$("#userLogueado").text(),objr.id=parseInt($("#usuario_areaId").text()),ControlRol(),ObtenerAreas(),ControlArea(),ControlAutocompletado(),ControlAutocompletadoTitular(),ControlEsTitular(),!1});$.validator.addMethod("dependiente",function(n,t,i){return objrol.valor=$("select#Crear_"+i[0]).val(),objs.arrRolUsuario.includes(objrol.valor)?n===""?!1:!0:!0});$.validator.unobtrusive.adapters.add("dependiente",["dependencia"],function(n){n.rules.dependiente=[n.params.dependencia];n.messages.dependiente=n.message});$.validator.addMethod("condicion",function(n,t,i){return objcheck.valor=$("input[type=checkbox]#Crear_"+i[0]).is(":checked"),objcheck.valor?!0:$.trim(n).length===0||$("input#Crear_"+i[1]).val()===n?!1:!0});$.validator.unobtrusive.adapters.add("condicion",["dependencia","referencia"],function(n){n.rules.condicion=[n.params.dependencia,n.params.referencia];n.messages.condicion=n.message});