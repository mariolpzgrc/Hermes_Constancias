function ControlAutocompletado(){$("input#ViewModel_NombreUsuario").flexdatalist({cache:!1,multiple:!0,minLength:3,searchContain:!1,searchByWord:!0,maxShownResults:20,selectionRequired:!0,focusFirstResult:!0,searchIn:["HER_NombreCompleto","HER_UserName"],searchDelay:400,noResultsText:'No se han encontrado resultados para "{keyword}"',visibleProperties:["HER_NombreCompleto"],textProperty:"{HER_UserName}",valueProperty:"HER_UserName",removeOnBackspace:!0,valuesSeparator:",",limitOfValues:1,url:objWebRoot.route+"api/v1/users/reasignacion",requestHeaders:{Authorization:"Bearer "+objWebRoot.token}});$("input#ViewModel_NombreUsuario").on("select:flexdatalist",function(n,t){$("#ViewModel_Nombre").val(t.HER_NombreCompleto);$("#ViewModel_Correo").val(t.HER_Correo)});$("input#ViewModel_NombreUsuario").on("after:flexdatalist.remove",function(){$("#control-busqueda ul > li.input-container").show();$("#ViewModel_Nombre").val("");$("#ViewModel_Correo").val("")})}function ControlAutocompletadoTitular(){$("input#ViewModel_Titular").flexdatalist({cache:!1,multiple:!0,minLength:3,searchContain:!1,searchByWord:!0,maxShownResults:20,selectionRequired:!0,focusFirstResult:!0,searchIn:["HER_Usuario_NombreCompleto","HER_Usuario_Username"],searchDelay:400,noResultsText:'No se han encontrado resultados para "{keyword}"',visibleProperties:["HER_Usuario_NombreCompleto"],textProperty:"{HER_Usuario_Username}",valueProperty:"HER_Usuario_Username",removeOnBackspace:!0,valuesSeparator:",",limitOfValues:1,url:objWebRoot.route+"api/v1/users/listactive",requestHeaders:{Authorization:"Bearer "+objWebRoot.token}});$("input#ViewModel_Titular").on("select:flexdatalist",function(n,t){$("#ViewModel_Nombre").val(t.HER_Usuario_NombreCompleto);$("#ViewModel_Correo").val(t.HER_Usuario_Correo)});$("input#ViewModel_Titular").on("after:flexdatalist.remove",function(){$("#contiene-titular ul > li.input-container").show();$("#ViewModel_Nombre").val("");$("#ViewModel_Correo").val("")})}function ControlEsTitular(){$("#ViewModel_EsTitular").change(function(){$(this).is(":checked")?($("#contiene-titular").removeClass("d-none"),$("#contiene-titular").addClass("d-none")):$("#contiene-titular").removeClass("d-none")})}function ObtenerAreas(){objp.urln=objWebRoot.route+"api/v1/areas/padresConHijas/"+objr.id;objp.metodo="GET";$.ajax({url:objp.urln,type:objp.metodo,contentType:"application/json; charset=utf-8",beforeSend:function(n){n.setRequestHeader("Authorization","Bearer "+objWebRoot.token)},success:function(n){objAreas.info=Object.keys({});objAreas.info=n;$("#ViewModel_AreaId").empty();$("#ViewModel_AreaId").append($("<option><\/option>").val("").html("[Seleccione un área]"));$.each(objAreas.info,function(n,t){$("#ViewModel_AreaId").append($("<option><\/option>").val(t.HER_AreaId).html(t.HER_Nombre))})},error:function(){console.log("No se puede recuperar la informacion");$("#ViewModel_AreaId").empty();$("#ViewModel_AreaId").append($("<option><\/option>").val("").html("[Seleccione una región]"))}})}function ControlArea(){$("#ViewModel_AreaId").change(function(){$("#ViewModel_AreaId").val()!==""?(objArea.id=$("#ViewModel_AreaId").val(),objArea.actual=objAreas.info.find(n=>n.HER_AreaId==objArea.id),$("#ViewModel_Direccion").val(objArea.actual.HER_Direccion),$("#ViewModel_Telefono").val(objArea.actual.HER_Telefono)):($("#ViewModel_Direccion").val(""),$("#ViewModel_Telefono").val(""))})}var objp={urln:"",metodo:"",datos:{}},objr={id:""},objs={arrRolUsuario:["Titular","Usuario"]},objTipoHttp={get:1,post:2},objrol={valor:""},objcheck={valor:!1},objAutocompletado={urln:"",usuario:""},objInfoUsuario={userName:"",fullName:"",email:""},objAutocompletadoTitular={urln:"",usuario:""},objInfoUsuarioTitular={userName:"",fullName:"",email:""},objWebRoot={route:"",token:""},objUser={username:""},objAreas={info:Object.keys({}),indexSeleccionado:0,objSeleccionado:Object.keys({})},objArea={id:0,actual:Object.keys({})};$(function(){return objWebRoot.route=$("#routeWebRoot").val(),objWebRoot.token=$("#TokenWebApi").val(),objUser.username=$("#userLogueado").text(),objr.id=parseInt($("#usuario_areaId").text()),ControlAutocompletado(),ObtenerAreas(),ControlArea(),ControlAutocompletadoTitular(),ControlEsTitular(),$("input#ViewModel_Nombre").val(""),$("input#ViewModel_NombreUsuario").val(""),$("input#ViewModel_Correo").val(""),!1});$.validator.addMethod("condicion",function(n,t,i){return objcheck.valor=$("input[type=checkbox]#ViewModel_"+i[0]).is(":checked"),objcheck.valor?!0:$.trim(n).length===0||$("input#ViewModel_"+i[1]).val()===n?!1:!0});$.validator.unobtrusive.adapters.add("condicion",["dependencia","referencia"],function(n){n.rules.condicion=[n.params.dependencia,n.params.referencia];n.messages.condicion=n.message});